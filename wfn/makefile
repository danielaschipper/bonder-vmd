#Where VMD is installed on your system
#VMDDIR=/home/ds143/lib/vmd

# Location of the VMD include files vmdplugin.h and molfile_plugin.h.
# Typically, these files can be found in the subdir 
# plugins/include of the VMD installation directory.
#VMDCPPFLAGS=-I$(VMDDIR)/plugins/include -I.

#HDF5_CC=clang #for better warnings
CC=WFN_CC=$(WFN_CC) gcc
#compiler switches http://gcc.gnu.org/onlinedocs/gcc-3.4.3/gnat_ugn_unw/Switches-for-gcc.html
CFLAGS=-Wall -Wuninitialized -std=c99 -pedantic -fPIC
CPPFLAGS=-I.
LDFLAGS=-L.
LDLIBS=
SHLD=$(CC)
SHLDFLAGS=-shared -Wl,--no-undefined $(LDFLAGS)

all: wfnplugin.so



wfnplugin.so: wfnplugin.o
	$(SHLD) $(CFLAGS) $(SHLDFLAGS) $< -o wfnplugin.so $(LDLIBS) -Wl,-rpath,'\$$ORIGIN'

check:
	cd tests && $(MAKE) check

#remove all files generated by make
clean:
	$(RM) wfnplugin.so
	$(RM) *.o
	$(RM) *~
	
install:  wfnplugin.so
	cp $^ $(VMDDIR)/plugins/LINUXAMD64/molfile/

